<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="fin.css">
</head>
<body>
    <div class="sidebar" id="sidebar">
        <button class="toggle-btn" onclick="toggleSidebar()" id="toggleBtn">‚Üí</button>
        <div class="menu-title" id="menuTitle">Menu</div>
        <ul class="menu" id="menu">
            <li class="menu-item" onclick="openBlank('ledgers.html')">
                <span class="arrow label">></span><span class="label">Ledgers</span>
            </li>
            <li class="menu-item" onclick="openBlank('customers.html')">
                <span class="arrow label">></span><span class="label">Customers</span>
            </li>
            <li class="menu-item" onclick="openBlank('vendors.html')">
                <span class="arrow label">></span><span class="label">Vendors</span>
            </li>
            <li class="menu-item" onclick="toggleSubmenu()">
                <span class="arrow label">></span><span class="label">Statements</span>
            </li>
            <ul class="submenu" id="statementsSubmenu">
                <li class="menu-item" onclick="openBlank('pl.html')">
                    <span class="arrow label">></span><span class="label">P and L</span>
                </li>
                <li class="menu-item" onclick="openBlank('bank.html')">
                    <span class="arrow label">></span><span class="label">Bank Statement</span>
                </li>
                <li class="menu-item" onclick="openBlank('balance.html')">
                    <span class="arrow label">></span><span class="label">Balance Sheet</span>
                </li>
            </ul>
        </ul>
    </div>

    <div class="dashboard-container">
        <div class="dashboard-title">Dashboard</div>
        <div class="dashboard" id="dashboard">
            <div class="stat-card">
                <div class="stat-title">Total Transactions</div>
                <div class="stat-value" id="stat-transactions">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Total Inventory Items</div>
                <div class="stat-value" id="stat-inventory">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Total Customers</div>
                <div class="stat-value" id="stat-customers">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Total Vendors</div>
                <div class="stat-value" id="stat-vendors">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Pending Orders</div>
                <div class="stat-value" id="stat-orders">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Low Stock Alerts</div>
                <div class="stat-value" id="stat-lowstock">0</div>
            </div>
        </div>
    </div>

    <div class="fab-container">
        <button class="fab fab-1" title="Add Transaction" id="btnAddTrans">Ôºã</button>
        <button class="fab fab-2" title="Add Inventory" id="btnAddInv">üì¶</button>
        <button class="fab fab-3" title="Add Customer" id="btnAddCust">üë§</button>
        <button class="fab fab-4" title="Add Vendor" id="btnAddVend">üè¢</button>
        <button class="fab fab-5" title="Reports" id="btnReports">üìä</button>
        <button class="fab fab-6" title="Settings" id="btnSettings">‚öôÔ∏è</button>
    </div>

    <div class="greeting-container">
        <div class="greeting" id="greeting"></div>
        <div class="name" id="userName">Nikhil</div>
    </div>

    <script>
        const greetingElement = document.getElementById('greeting');
        const hour = new Date().getHours();
        if (hour >= 5 && hour < 12) {
            greetingElement.textContent = 'Good Morning';
        } else if (hour >= 12 && hour < 16) {
            greetingElement.textContent = 'Good Afternoon';
        } else if (hour >= 16 && hour < 20) {
            greetingElement.textContent = 'Good Evening';
        } else {
            greetingElement.textContent = 'Welcome';
        }

        function openBlank(page) {
            window.open(page, '_blank');
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const labels = document.querySelectorAll('.label');
            const menuTitle = document.getElementById('menuTitle');
            const toggleBtn = document.getElementById('toggleBtn');

            sidebar.classList.toggle('collapsed');
            const isCollapsed = sidebar.classList.contains('collapsed');

            labels.forEach(el => {
                el.style.display = isCollapsed ? 'none' : 'inline';
            });

            menuTitle.style.display = isCollapsed ? 'none' : 'block';

            toggleBtn.innerHTML = isCollapsed ? '‚Üí' : '‚Üê';
        }

        function toggleSubmenu() {
            const submenu = document.getElementById('statementsSubmenu');
            submenu.classList.toggle('open');
        }

        // --- Dashboard demo data (replace with DB fetch) ---
        function loadDashboardStats() {
            // Simulate fetching from DB
            const stats = {
                transactions: 1240,
                inventory: 320,
                customers: 87,
                vendors: 34,
                orders: 12,
                lowstock: 5
            };
            document.getElementById('stat-transactions').textContent = stats.transactions;
            document.getElementById('stat-inventory').textContent = stats.inventory;
            document.getElementById('stat-customers').textContent = stats.customers;
            document.getElementById('stat-vendors').textContent = stats.vendors;
            document.getElementById('stat-orders').textContent = stats.orders;
            document.getElementById('stat-lowstock').textContent = stats.lowstock;
        }
        loadDashboardStats();

        // --- Floating Action Buttons: Animate on click ---
        const fabs = document.querySelectorAll('.fab');
        fabs.forEach((fab) => {
            fab.addEventListener('click', () => {
                fab.animate([
                    { transform: 'scale(1) rotate(0deg)' },
                    { transform: 'scale(1.18) rotate(12deg)' },
                    { transform: 'scale(1) rotate(0deg)' }
                ], {
                    duration: 400,
                    easing: 'cubic-bezier(.68,-0.55,.27,1.55)'
                });
            });
        });

        // --- User greeting and name from login ---
        const user = JSON.parse(localStorage.getItem('fin_user') || '{}');
        if (user && user.username) {
            document.getElementById('userName').textContent = user.username.charAt(0).toUpperCase() + user.username.slice(1);
        }
    </script>
</body>
</html>
